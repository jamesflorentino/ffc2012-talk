<!doctype>
<html>
<head>
<title>From Flash to HTML5 - James Florentino</title>
</head>
<meta charset="utf-8">
<meta name="author" content="James Florentino">
<link href="css/impress-demo.css" rel="stylesheet">
<link href="css/style.css" rel="stylesheet">
<link rel="stylesheet" href="css/ir_black.css">
<link href='http://fonts.googleapis.com/css?family=Lato:300,400,700' rel='stylesheet' type='text/css'>
<script src="http://use.edgefonts.net/source-code-pro.js"></script>
<script src="js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<body>



<div class="fallback-message">
  Download and use Chrome or Firefox to view this presentation.
</div>




<div id="impress">

<div id="introduction" class="step slide center"
  data-x="-1000"
  >
  <h1>From <span class='red'>Flash</span> To <span class='green'>HTML5</span></h1>
  <p>by James Florentino</p>
  <a href="http://twitter.com/jamesflorentino">@jamesflorentino</a>
</div>

<div id="introduction-1" class='step center'
  data-x="-1000"
  data-rotate-x="90"
  >
  <p class="small push">I'm here to talk about my little personal project</p>
  <hr/>
  <figure>
    <img src="images/wol-iphone.png" width="100%"/>
  </figure>
</div>

<!-- Screen shot  -->
<div id="introduction-2" class="step center"
  data-x="-1000"
  data-rotate-x="190"
  data-y="1000"
  >
  <p>A turn-based game built in <b class='green'>HTML5</b></p>
  <hr/>
  <figure>
  <img src="images/game-screenshot.png" alt="screenshot" />
  </figure>
</div>

<!-- Before that  -->
<div id="before-anything" class="step"
  data-x="0"  data-rotate-x="180" data-y="1500"
  >
  <p>But before anything else, let me tell a bit about myself...</p>
</div>




<div class="step"
  data-x="10"
  >
  <p>I do front-end design and development as a profession and I develop games as a hobby.</p>
  <hr/>
</div>
















<div class="step" 
  data-y="300"
  >
  <p>Spent 8 years doing Flash Development.</p>
  <p>But has now fully migrated to HTML5 and JavaScript.</p>
  <hr/>
</div>













<!-- ABout the game  -->
<div id="about-the-game" class="step"
  data-y="-1000"
  data-x="0"
  data-z="1000"
  >
  <p><b>Wings of Lemuria</b> is a small personal project I started way back in 2009 as something to do in my spare time.</p>
</div>













<div class="step"
  data-y="-500"
  data-x="0"
  data-z="500"
  >
  <img src="images/lemurian_army_pose.png" alt="" />
</div>






<!-- Prototyping in Flash  -->

<div id="prototyping-in-flash" class="step center"
  data-y="800"
  data-x="0"
  data-z="0"
  data-rotate-x="90"
  >
  <p>Initially made the <a class="flip" href="http://jamesflorentino.com/wingsoflemuria.com/labs">prototype</a> in Flash using ActionScript 3.0.</p>

  <img src="images/prototype-flash.png" alt="" />

</div>


<div class="step"
  data-y="800"
  data-x="0"
  data-z="-700"
  data-rotate-x="90"
 
  >
  <h1 class='red'>First problems encountered</h1>
  <ul>
    <li>Choppy animation due to multiple MovieClip instances.</li>
    <li>Flash Display Objects were expensive to process when dealing with multiple animations.</li>
  </ul>
</div>


<div class="step"
  data-y="800"
  data-x="0"
  data-z="-1400"
  data-rotate-x="90"
  >
  <h1>Improving performance</h1>
  <hr/>
  <p><a href="http://en.wikipedia.org/wiki/Bit_blit">Blitting</a> is a traditional technique used in game development, where you copy pixels and paint it over a bitmap canvas.</p>
</div>




<div class="step center"
  data-y="800"
  data-x="1000"
  data-z="-1400"
  data-rotate-x="90"
  >
  <span class="chart">
    Pre-rendered sprites
  </span>
  <p class='action'>Copy the pixel data and store them to a vector array.</p>
  <span class="chart">
    Bitmap Canvas
  </span>
  <p class='action'>Paint it over to the main canvas</p>
</div>




<div class="step center"
  data-y="800"
  data-x="1000"
  data-z="-2400"
  data-rotate-x="90"
  >
  <p>Made <a href="http://jamesflorentino.com/wingsoflemuria.com/labs/tests/gameengine_hiraya/builds/0_1/">another prototype</a> using the blitting technique.</p>
  <hr class='thin'/>
  <img src="images/blitting-flash.png" alt="" />
</div>



<div class="step"
  data-y="1800"
  data-x="2000"
  data-z="-2400"
  data-rotate-x="180"
  >

  <h1>Initial results</h1>
  <ul>
    <li>Performance was noticeably better</li>
    <li>CPU consumption decreased significantly</li>
    <li>Memory usage increased at the expense of speedy performance</li>
  </ul>

</div>





<div class="step center"
  data-y="1800"
  data-x="3200"
  data-z="-2400"
  data-rotate-x="180"
  >
  <img src="images/not-bad.jpg" alt="" />
</div>







<div class="step center"
  data-y="2800"
  data-x="3200"
  data-z="-2400"
  data-rotate-x="180"
  >

  <b>
  However... <i>(uh-oh)</i>
  </b>

</div>








<div class="step"
  data-y="2800"
  data-x="3200"
  data-z="-2400"
  data-rotate-y="90"
  >
  <p>
    Blitting in Flash doesn't allow you to do bitmap data  manipulation like scaling or rotation using <code>bitmapData.copyPixels</code>.
  </p>
</div>










<div class="step"
  data-y="2800"
  data-x="4200"
  data-z="-3400"
  data-rotate-y="90"
  >

  <img src="images/flip-table.png" alt=""/>

</div>











<div class="step center"
  data-y="4800"
  data-x="4200"
  data-z="-2400"
  data-rotate-y="90"
  >

  <h1 class='green'>First look at HTML5</h1>

</div>







<div class="step"
  data-y="4800"
  data-x="4200"
  data-z="-3400"
  data-rotate-y="90"
  >

  <h1>Features in <b class="green">HTML5 </b>that attracted me as a Flash Developer</h1>
  <ul class="small">
    <li>Canvas</li>
    <li>Audio</li>
    <li>Video</li>
    <li>Desktop Notifications</li>
  </ul>

</div>




<div class="step"
  data-y="4800"
  data-x="4200"
  data-z="-4400"
  data-rotate-y="90"
  >

  <p>Decided to write a <a href="http://jamesflorentino.com/wingsoflemuria.com/labs/tests/gameengine_hiraya/html5/">quick prototype</a>with the <b>Canvas 2D API</b>. Using the same game assets that I had before.</p>

</div>







<div class="step"
  data-y="2800"
  data-x="4200"
  data-z="-4400"
  data-rotate-y="90"
  >

  <h1>Initial results</h1>
  <ul>
    <li>Performance matches the blitting implementations in Flash.</li>
    <li>Each drawing operation allowed me to scale and rotate pixel data at minimum CPU cost.</li>
    <li>Writing a rendering library from scratch is tricky and time consuming.</li>
  </ul>

</div>


<div class="step center"
  data-y="1800"
  data-x="4200"
  data-z="-4400"
  data-rotate-y="90"
  >

  <p class='push'><b>JavaScript</b> is a scripted language which means the code doesn't need to compile.</p>
  <p class='very-small'>Which sometimes is a double-edged sword.</p>

</div>





<div class="step center"
  data-y="0"
  data-x="4200"
  data-z="-4400"
  data-rotate-y="90"
  >
  <p>
    I decided to build my game in <b>HTML5.</b>
  </p>
  <p class="very-small ">Because Flash was becoming irrelevant to the modern web</p>

</div>




<div class="step center"
  data-y="-1000"
  data-x="3200"
  data-z="-4000"
  data-rotate-x="0"
  data-rotate-y="90"
  >

  <h1>Tools of the trade</h1>

</div>








<div class="step "
  data-y="-1000"
  data-x="4200"
  data-z="-5400"
  data-rotate-x="40"
  data-rotate-y="90"
  >

  <h1>The <a href="http://createjs.com/">CreateJS </a>Suite</h1>
  <ul class='small'>
    <li><a href="http://www.createjs.com/#!/EaselJS">EaselJS</a> - Canvas 2D library with display list and sprite sheet support</li>
    <li><a href="http://www.createjs.com/#!/TweenJS">TweenJS</a> - Tweening library that integrates with EaselJS's Ticker class</li>
    <li><a href="http://www.createjs.com/#!/SoundJS">SoundJS </a> - Sound manager</li>
    <li><a href="http://www.createjs.com/#!/PreloadJS">PreloadJS </a> - Asset preloader</li>
    <li><a href="http://www.createjs.com/#!/Zoe">Zoe </a>- Tool for exporting SWF animations as EaselJS sprite sheets.</li>
  </ul>

</div>









<div class="step center"
  data-y="-1000"
  data-x="4200"
  data-z="-4400"
  data-rotate-x="0"
  data-rotate-y="0"
  >

  <h1>Preparing Game Asssets</h1>

</div>











<div class="step"
  data-y="-2000"
  data-x="4200"
  data-z="-4400"
  data-rotate-x="40"
  data-rotate-y="90"
  >

  I still prefer making the animations in the Flash IDE because of familiarity. Thankfully, CreateJS's <b>Zoe</b> can read SWF files and export them as <b>JSON</b> and <b>PNG</b> which can be used in EaselJS's <code>SpriteSheet</code> class as frame data.

</div>









<div class="step"
  data-y="-2000"
  data-x="4200"
  data-z="-4400"
  data-rotate-x="0"
  data-rotate-y="0"
  >

  <h1>Animating in Flash</h1>
  <hr class='thin' />

  <figure>
    <img src="images/animating_in_flash.png" alt="" />
  </figure>

</div>




<div class="step"
  data-y="-2000"
  data-x="5200"
  data-z="-4400"
  data-rotate-x="0"
  data-rotate-y="0"
  >

  <h1>Sprite Sheet Output</h1>
  <hr class='thin' />

  <figure>
    <img src="images/spritesheet_png.png" alt="" />
  </figure>

</div>









<div class="step "
  data-y="-1000"
  data-x="1000"
  data-z="0"
  data-rotate-x="0"
  data-rotate-y="0"
  >

  <h1>Writing the game client in JavaScript</h1>
  <ul class="small noline">
    <li>Use AMD for loading modules and dependencies</li>
    <li>Modularize code</li>
    <li>Fix bugs quickly</li>
    <li>Add comments when doing unconventional coding practices and update it as quickly as you can</li>
  </ul>

</div>



<div class="step "
  data-y="-2000"
  data-x="1000"
  data-z="0"
  data-rotate-x="0"
  data-rotate-y="0"
  >

  <h1>Basic AMD usage</h1>
  <hr class='thin'/>
  <pre><code>define(
  moduleId,
  dependencies,
  definition
);</code></pre>

</div>






<div class="step "
  data-y="-3000"
  data-x="1000"
  data-z="0"
  data-rotate-x="0"
  data-rotate-y="0"
  >
  <h1>AMD example</h1>
  <hr class='thin'/>
<pre><code>define(
  'game',
  ['my-class'],
  function(MyClass) {
    var myClass = new MyClass();
  }
});
</code></pre>
</div>



<div class="step "
  data-y="-4000"
  data-x="1000"
  data-z="0"
  data-rotate-x="0"
  data-rotate-y="0"
  >
  <h1>Entity Component System</h1>
  <hr class='thin'/>
  <p class='small push'>This allows me to create a more de-coupled game architecture without the need of complex OOP.</p>
<pre><code>var entity = factory.create([components]);
</code></pre>
</div>



<div class="step "
  data-y="-4000"
  data-x="2000"
  data-z="0"
  data-rotate-x="0"
  data-rotate-y="0"
  >
  <h1>Example usage</h1>
  <hr class='thin'/>
    <p class='small push'>Entities are objects that interact with the game.</p>
<pre class='small'><code>/** entity magic training **/
var wizard = entity.create('Magic');
/** entity with swordsmanship training **/
var swordsman = entity.create('Sword');
/** entity with both magic and sword training **/
var jedi = entity.create('Sword', 'Magic');
/** a jedi entity that succumbed to the dark side **/
var sith = entity.create('Sword', 'Magic', 'DarkSide');
</code></pre>
</div>



<div class="step "
  data-y="-5000"
  data-x="2000"
  data-z="0"
  data-rotate-x="0"
  data-rotate-y="0"
  >
  <h1>Defining components</h1>
  <hr class='thin'/>
  <p class='very-small push'>Attaching components to entities exposes new sets of APIs.</p>
  <pre class='small'><code>components.register('Magic', function(entity) {
    entity.firaga = function(enemy) {
      enemy.hp--;
      enemy.burning = true;
    }
    entity.thundaga = function(enemy) {
      enemy.hp--;
      enemy.paralyzed = true;
    }
  });
var toon = factory.create();
var mage = factory.create('Wizard');
/** toon takes a damage and is in burning state! **/
mage.firaga(toon);
/** toon takes a damage and is paralyzed! **/
mage.thundaga(toon);
</code></pre>
</div>





















<div class="step "
  data-y="-4000"
  data-x="-1000"
  data-z="1000"
  data-rotate-x="0"
  data-rotate-y="0"
  >
  <h1>Build the user-interface outside of Canvas</h1>
  <ul class="small noline">
    <li>CSS3 transforms and transitions are hardware accelerated</li>
    <li>UI Animations are easier to maintain in CSS than hardcoded JavaScript</li>
    <li>Concatenate images into one PNG sprite sheet for performance.</li>
  </ul>
</div>




<div class="step "
  data-y="-4000"
  data-x="0"
  data-z="0"
  data-rotate-x="0"
  data-rotate-y="0"
  >
  <h1>About CSS pre-processors</h1>
  <ul class="small noline">
    <li>Helps with maintaining a large modularized CSS code-base</li>
    <li>Reduces redundant style definitions</li>
    <li>Easier to manage</li>
    <li>Nesting, mixins and other goodies</li>
  </ul>
</div>



<div class="step "
  data-y="-3000"
  data-x="0"
  data-z="0"
  data-rotate-x="0"
  data-rotate-y="0"
  >
  <h1>Stylus and Nib</h1>
  <ul class="small noline">
    <li>Minimalist CSS dialect (optional braces, colons and semicolons)</li>
    <li>Arithmetics</li>
    <li>Variables</li>
    <li>Runs on node.js</li>
  </ul>
</div>








<div class="step "
  data-y="-2000"
  data-x="0"
  data-z="0"
  data-rotate-x="0"
  data-rotate-y="0"
  >
  <h1>Final thoughts</h1>
  <ul class="small noline">
    <li>Anytime time you're fixing a problem that's already been solved, you're being inefficient.</li>
    <li>Use available libraries. Read their source code and learn from them.</li>
    <li>If your library is missing a feature, fork the project and contribute.</li>
    <li>Invent something only out of necessity.</li>
    <li>Focus on getting the game done!</li>
  </ul>
</div>










<div class="step center"
  data-y="0"
  data-x="0"
  data-z="0"
  data-rotate-x="0"
  data-rotate-y="90"
  >
  <h1>Thank you for listening!</h1>
  <p class='small'>Follow me on Twitter <a href="http://twitter.com/jamesflorentino">@jamesflorentino</a></p>
  <p class='small push'>or read my blog for random front-end dev tips <a href="http://blog.jamesflorentino.com">blog.jamesflorentino.com</a></p>
  <p class='very-small fade'>If you're looking for a link to my game, it's still a work in progress. You can however subscribe to its <a href="http://facebook.com/wingsoflemuria">Facebook page</a> to get updated once it's out.</p>
</div>


























<!-- END IMPRESS  -->

</div>




















<div class="hint">
    <p>Use a spacebar or arrow keys to navigate</p>
</div>
<script>
if ("ontouchstart" in document.documentElement) { 
    document.querySelector(".hint").innerHTML = "<p>Tap on the left or right to navigate</p>";
}
</script>



<script src="js/impress.js"></script>
<script>impress().init();</script>

</body>
</html>
