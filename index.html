<!doctype>
<html>
<head>
<title>From Flash to HTML5 - James Florentino</title>
</head>
<meta charset="utf-8">
<meta name="author" content="James Florentino">
<link href="css/impress-demo.css" rel="stylesheet">
<link href="css/style.css" rel="stylesheet">
<link rel="stylesheet" href="css/ir_black.css">
<script src="js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad('javascript');</script>
<body>
<div class="fallback-message">
  download and use Chrome to view this presentation.
</div>

<div id="impress">

<!-- Introduction  -->
<div id="introduction" class="step slide center"
  data-x="-1000"
  >
  <h1>From <span class='red'>Flash</span> To <span class='green'>HTML5</span></h1>
  <p>by James Florentino</p>
  <a href="http://twitter.com/jamesflorentino">@jamesflorentino</a>
</div>

<!-- Introduction 1  -->
<div id="introduction-1" class='step center'
  data-x="-1000"  data-rotate-x="90"
  >
  <p class="push">I'm here to talk about my little personal project</p>
  <hr/>
  <figure>
    <img src="images/wol-iphone.png" width="100%"/>
  </figure>
</div>

<!-- Screen shot  -->
<div id="introduction-2" class="step center"
  data-x="-1000"
  data-rotate-x="190"
  data-y="1000"
  >
  <p>A turn-based game built in HTML5.</p>
  <hr/>
  <figure>
  <img src="images/game-screenshot.png" alt="screenshot" />
  </figure>
</div>

<!-- Before that  -->
<div id="before-anything" class="step"
  data-x="0"  data-rotate-x="180" data-y="1500"
  >
  <p>But before anything else, let me tell a bit about myself...</p>
</div>




<div class="step"
  data-x="10"
  >
  <p>I do front-end design and development as a profession and I develop games as a hobby.</p>
  <hr/>
</div>
















<div class="step" 
  data-y="300"
  >
  <p>Spent 8 years doing Flash Development.</p>
  <p>But has now fully migrated to HTML5 and JavaScript.</p>
  <hr/>
</div>













<!-- ABout the game  -->
<div id="about-the-game" class="step"
  data-y="-1000"
  data-x="0"
  data-z="1000"
  >
  <p><b>Wings of Lemuria</b> is a small personal project I started way back in 2009 as something to do in my spare time.</p>
</div>


<div class="step"
  data-y="-500"
  data-x="0"
  data-z="500"
  >
  <img src="images/lemurian_army_pose.png" alt="" />
</div>






<!-- Prototyping in Flash  -->

<div id="prototyping-in-flash" class="step center"
  data-y="800"
  data-x="0"
  data-z="0"
  data-rotate-x="90"
  >
  <p>Initially made the <a class="flip" href="http://jamesflorentino.com/wingsoflemuria.com/labs">prototype</a> in Flash using ActionScript 3.0.</p>

  <img src="images/prototype-flash.png" alt="" />

</div>


<div class="step"
  data-y="800"
  data-x="0"
  data-z="-700"
  data-rotate-x="90"
 
  >
  <h1 class='red'>First problems encountered</h1>
  <ul>
    <li>Choppy animation due to multiple MovieClip instances.</li>
    <li>Flash Display Objects were expensive to process when dealing with multiple animations.</li>
  </ul>
</div>


<div class="step"
  data-y="800"
  data-x="0"
  data-z="-1400"
  data-rotate-x="90"
  >
  <h1>Improving performance</h1>
  <hr/>
  <p><a href="http://en.wikipedia.org/wiki/Bit_blit">Blitting</a> is a traditional technique used in game development, where you copy pixels and paint it over a bitmap canvas.</p>
</div>




<div class="step center"
  data-y="800"
  data-x="1000"
  data-z="-1400"
  data-rotate-x="90"
  >
  <span class="chart">
    Pre-rendered sprites
  </span>
  <p class='action'>Copy the pixel data and store them to a vector array.</p>
  <span class="chart">
    Bitmap Canvas
  </span>
  <p class='action'>Paint it over to the main canvas</p>
</div>




<div class="step center"
  data-y="800"
  data-x="1000"
  data-z="-2400"
  data-rotate-x="90"
  >
  <p>Made <a href="http://jamesflorentino.com/wingsoflemuria.com/labs/tests/gameengine_hiraya/builds/0_1/">another prototype</a> using the blitting technique.</p>
  <hr class='thin'/>
  <img src="images/blitting-flash.png" alt="" />
</div>



<div class="step"
  data-y="1800"
  data-x="2000"
  data-z="-2400"
  data-rotate-x="180"
  >

  <h1>Initial results</h1>
  <ul>
    <li>Performance was noticeably better.</li>
    <li>CPU consumption decreased significantly.</li>
    <li>Memory usage increased.</li>
  </ul>

</div>





<div class="step center"
  data-y="1800"
  data-x="3200"
  data-z="-2400"
  data-rotate-x="180"
  >
  <img src="images/not-bad.jpg" alt="" />
</div>







<div class="step center"
  data-y="2800"
  data-x="3200"
  data-z="-2400"
  data-rotate-x="180"
  >

  <b>
  However... <i>(uh-oh)</i>
  </b>

</div>








<div class="step"
  data-y="2800"
  data-x="3200"
  data-z="-2400"
  data-rotate-y="90"
  >
  <p>
    Blitting in Flash doesn't allow you to do pixel manipulation like scaling or rotation using <code>bitmapData.copyPixels</code>.
  </p>
</div>










<div class="step"
  data-y="2800"
  data-x="4200"
  data-z="-3400"
  data-rotate-y="90"
  >

  <img src="images/flip-table.png" alt=""/>

</div>











<div class="step center"
  data-y="4800"
  data-x="4200"
  data-z="-2400"
  data-rotate-y="90"
  >

  <h1 class='green'>First look at HTML5</h1>

</div>







<div class="step"
  data-y="4800"
  data-x="4200"
  data-z="-3400"
  data-rotate-y="90"
  >

  <h1>Features in <b class="green">HTML5 </b>that attracted me as a Flash Developer</h1>
  <ul class="small">
    <li>Canvas</li>
    <li>Audio</li>
    <li>Video</li>
    <li>Desktop Notifications</li>
  </ul>

</div>




<div class="step"
  data-y="4800"
  data-x="4200"
  data-z="-4400"
  data-rotate-y="90"
  >

  <b>Decided to write a <a href="http://jamesflorentino.com/wingsoflemuria.com/labs/tests/gameengine_hiraya/html5/">quick prototype</a>with the Canvas 2D API. Using the same game assets that I have.</b>

</div>







<div class="step"
  data-y="2800"
  data-x="4200"
  data-z="-4400"
  data-rotate-y="90"
  >

  <h1>Initial results</h1>
  <ul>
    <li>Performance matches the blitting implementations in Flash.</li>
    <li>Each drawing operation allowed me to scale and rotate pixel data at minimum CPU cost.</li>
    <li>Writing a rendering library from scratch is tricky and time consuming.</li>
  </ul>

</div>


<div class="step center"
  data-y="1800"
  data-x="4200"
  data-z="-4400"
  data-rotate-y="90"
  >

  <b>JavaScript</b> is a scripted language which means the code doesn't need to compile.
  <hr class='thin'/>
  <i><small>Which sometimes is a double-edged sword.</small></i>

</div>





<div class="step"
  data-y="0"
  data-x="4200"
  data-z="-4400"
  data-rotate-y="90"
  >

  I started building my game in <b>HTML5.</b>

</div>




<div class="step center"
  data-y="-1000"
  data-x="3200"
  data-z="-4000"
  data-rotate-x="0"
  data-rotate-y="90"
  >

  <h1>Tools of the trade</h1>

</div>








<div class="step "
  data-y="-1000"
  data-x="4200"
  data-z="-5400"
  data-rotate-x="40"
  data-rotate-y="90"
  >

  <h1>The CreateJS Suite</h1>
  <ul>
    <li>EaselJS - Canvas 2D library.</li>
    <li>TweenJS - Tweening library that integrates with EaselJS's Ticker class.</li>
    <li>SoundJS - Sound manager</li>
    <li>Zoe - A sprite sheet exporter for SWF animations.</li>
  </ul>

</div>









<div class="step center"
  data-y="-1000"
  data-x="4200"
  data-z="-4400"
  data-rotate-x="0"
  data-rotate-y="0"
  >

  <h1>Preparing Game Asssets</h1>

</div>











<div class="step"
  data-y="-2000"
  data-x="4200"
  data-z="-4400"
  data-rotate-x="40"
  data-rotate-y="90"
  >

  I still prefer making the animations in Flash because of familiarity. Thankfully, CreateJS's <b>Zoe</b> can read SWF files and export them as <b>JSON</b> and <b>PNG</b> which can be used in EaselJS's <code>SpriteSheet</code> class.

</div>









<div class="step"
  data-y="-2000"
  data-x="4200"
  data-z="-4400"
  data-rotate-x="0"
  data-rotate-y="0"
  >

  <h1>Animating in Flash</h1>
  <hr class='thin' />

  <figure>
    <img src="images/animating_in_flash.png" alt="" />
  </figure>

</div>




<div class="step"
  data-y="-2000"
  data-x="5200"
  data-z="-4400"
  data-rotate-x="0"
  data-rotate-y="0"
  >

  <h1>Sprite Sheet Image</h1>
  <hr class='thin' />

  <figure>
    <img src="images/spritesheet_png.png" alt="" />
  </figure>

</div>









<div class="step "
  data-y="-1000"
  data-x="1000"
  data-z="0"
  data-rotate-x="0"
  data-rotate-y="0"
  >

  <h1>Writing the game client in JavaScript</h1>
  <ul class="small noline">
    <li>Use AMD for loading modules and dependencies</li>
    <li>Modularize code</li>
    <li>Fix bugs quickly</li>
    <li>Add comment when doing unconventional coding practices</li>
  </ul>

</div>



<div class="step "
  data-y="-2000"
  data-x="1000"
  data-z="0"
  data-rotate-x="0"
  data-rotate-y="0"
  >

  <h1>Basic AMD usage</h1>
  <hr class='thin'/>
  <pre><code>define(
  moduleId,
  dependencies,
  definition
);</code></pre>

</div>






<div class="step "
  data-y="-3000"
  data-x="1000"
  data-z="0"
  data-rotate-x="0"
  data-rotate-y="0"
  >
  <h1>AMD example</h1>
  <hr class='thin'/>
<pre><code>define(
  'game',
  ['my-class'],
  function(MyClass) {
    var myClass = new MyClass();
  }
});
</code></pre>
</div>



<div class="step "
  data-y="-4000"
  data-x="1000"
  data-z="0"
  data-rotate-x="0"
  data-rotate-y="0"
  >
  <h1>Entity Component System</h1>
  <hr class='thin'/>
<pre><code>var entity = factory.create([components]);
</code></pre>
</div>



<div class="step "
  data-y="-4000"
  data-x="2000"
  data-z="0"
  data-rotate-x="0"
  data-rotate-y="0"
  >
  <h1>Basic usage</h1>
  <hr class='thin'/>
<pre><code>var wizard = entity.create('Magic');
var swordsman = entity.create('Sword');
var jedi = entity.create('Sword', 'Magic');
</code></pre>
</div>



<div class="step "
  data-y="-5000"
  data-x="2000"
  data-z="0"
  data-rotate-x="0"
  data-rotate-y="0"
  >
  <h1>Defining components</h1>
  <hr class='thin'/>
  <pre><code>components.register('Magic', function(e) {
    e.firaga = function(enemy) {
      enemy.hp--;
      enemy.burning = true;
    }
    e.thundaga = function() {
      enemy.hp--;
      enemy.paralyzed = true;
    }
  });
</code></pre>
</div>





















<div class="step "
  data-y="-4000"
  data-x="-1000"
  data-z="1000"
  data-rotate-x="0"
  data-rotate-y="0"
  >
  <h1>Building the User-Interface</h1>
  <ul class="small noline">
    <li>CSS3 transforms and transitions are hardware accelerated</li>
    <li>UI Animations are easier to maintain in CSS than hardcoded it in JavaScript</li>
    <li>Concatenate images into one PNG sprite sheet.</li>
  </ul>
</div>




<div class="step "
  data-y="-4000"
  data-x="0"
  data-z="0"
  data-rotate-x="0"
  data-rotate-y="0"
  >
  <h1>About CSS pre-processors</h1>
  <ul class="small noline">
    <li>Helps with maintaining a large modularized CSS code-base.</li>
    <li>Reduces redundant style definitions.</li>
    <li>Easier to manage.</li>
  </ul>
</div>



<div class="step "
  data-y="-3000"
  data-x="0"
  data-z="0"
  data-rotate-x="0"
  data-rotate-y="0"
  >
  <h1>Stylus and Nib</h1>
  <ul class="small noline">
    <li>Optional braces, colons and semicolons</li>
    <li>Arithmetics</li>
    <li>Variables</li>
  </ul>
</div>






<div class="step "
  data-y="-2000"
  data-x="0"
  data-z="0"
  data-rotate-x="0"
  data-rotate-y="0"
  >
  <h1>Final thoughts</h1>
  <ul class="small noline">
    <li>JavaScript can make or break you.</li>
    <li>Anytime time you're solving a problem that's already been solved, you're being inefficient.</li>
  </ul>
</div>










<div class="step center"
  data-y="0"
  data-x="0"
  data-z="0"
  data-rotate-x="0"
  data-rotate-y="90"
  >
  <h1>Thank you for listening!</h1>
</div>


























<!-- END IMPRESS  -->

</div>




















<div class="hint">
    <p>Use a spacebar or arrow keys to navigate</p>
</div>
<script>
if ("ontouchstart" in document.documentElement) { 
    document.querySelector(".hint").innerHTML = "<p>Tap on the left or right to navigate</p>";
}
</script>



<script src="js/impress.js"></script>
<script>impress().init();</script>

</body>
</html>
